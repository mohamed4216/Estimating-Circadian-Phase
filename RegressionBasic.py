import matplotlib.pyplot as plt
import numpy as np
from sklearn import linear_model
from sklearn.svm import SVR
import pandas as pd
from sklearn.cross_validation import train_test_split


#features (reaction time)

x_positive_mean=[347.1472590484567, 359.1495205283235, 351.7582400536989, 341.7797218972077, 332.736342794321, 341.6654972687707, 346.4897625773621, 350.8710939979146,415.1352593426951, 489.92735823202764, 423.9968545020871, 446.0887938490634, 501.84469965257796, 533.0342719778972, 454.1389571233161,338.106299734968, 343.92628616569567, 358.91615428247303, 316.7927724424359, 321.5235107703593, 345.4864127100969, 353.7335282651072, 327.9462204462205,388.01665388874693, 498.75452420920965, 406.02105075723495, 420.15146617288605, 444.7038677447213, 468.2826807873342, 495.77392749892755,370.8880761063688, 393.7469976486692, 410.6725504066244, 455.0499170735738, 489.65738835153616, 460.05406140060745, 482.1631150910143, 486.71062725375054,867.7335363110715, 786.843324262184, 933.1978601759544, 1117.4162636320532, 1276.4375, 1546.2875661375663,360.48327702702704, 372.65139813998076, 363.82276422764227, 359.92958521870287, 389.4449842555105, 419.8918269230769, 429.1881181318681, 367.894533957034]

x_positive_median=[334.55, 341.8125, 330.75, 328.44444444444446, 316.2857142857143, 326.4166666666667, 332.14285714285717, 332.8333333333333,381.61538461538464, 428.75, 397.55, 414.09090909090907, 425.5, 442.95454545454544, 432.77777777777777,320.75, 329.375, 332.1, 306.4166666666667, 311.6, 322.6666666666667, 335.6666666666667,314.5,367.0, 399.9, 377.8333333333333, 364.5, 385.25, 416.0, 404.6666666666667,350.8333333333333, 376.0625, 372.0, 386.92857142857144, 423.75, 421.8125, 403.0, 413.25,670.6, 570.6111111111111, 566.2142857142857, 941.5, 617.5, 702.8333333333334,320.75, 336.2, 340.75, 335.2, 351.0, 379.625, 348.75, 347.125]

x_positive_std=[59.94005187375116, 90.31651637318411, 89.37063178677337, 65.14588799166182, 70.28568796171628, 61.67265531823114, 69.84650443091064, 79.10286618744689,129.59342708013912, 211.52142114913923, 121.46420582880066, 128.2542316535773, 279.08396509602574, 307.29376902853386, 93.4380053027291,68.80804926528751, 62.8701315331063, 104.87259871922338, 58.941566506339996, 58.23208266526869, 109.95905874747018, 79.83399868767428, 51.505947604242294,99.27666945589066, 370.30257512679106, 144.48294787887113, 176.9527417366297, 222.23193523274233, 287.9721778570193, 334.48041707166425,106.10044033264896, 102.39663413928513, 148.48986133877816, 222.0233481840947, 228.1004374850501, 164.40327361144168, 264.03089184148814, 416.36615923741647,761.0325866155475, 645.7754691063918, 929.0248656382593, 658.8028541535055, 1906.3582565770146, 2411.9747735484216,134.28349895468773, 121.21552122000091, 116.48014785529688, 98.95901685909556, 128.2269881794274, 190.1972670232341, 256.2588985072848, 72.56552617277993]

x_q50_mean=[387.8602232854864, 406.97862482911825, 398.02470238095236, 384.60953322040285, 372.3361686967277, 384.3485797827903, 389.6273720014322, 395.40798334219386,478.62580051527414, 589.1860066833751, 474.8663852813852, 505.7100892727687, 614.7242434598894, 662.1155129559437, 506.80745550745553,378.0444366020453, 382.1343984962406, 408.92968944099385, 349.1641605661057, 357.1422077922078, 389.97972582972585, 402.18654970760235, 361.94454545454545,444.5750541125541, 647.4251879699248, 474.74935318093213, 504.0087719298246, 546.8292615596964, 578.5333751044277, 630.8081035923141,430.74059644059645, 458.0157738714375, 487.5550206685545, 554.4707662012172, 604.8476489798471, 551.6305792891319, 609.3247113997114, 608.4476911976911,1207.9673099415206,1108.3115984405458, 1401.3281303749573, 1548.508187134503, 2079.375, 2570.002314814815,430.84999999999997, 428.65330304370553, 410.5258799171843, 406.18634920634923, 454.5798245614035, 499.92499999999995, 533.5092391304348, 410.6737781954887]

x_q75_lim=[374.7, 373.375, 362.3125, 369.80555555555554, 350.2142857142857, 364.125, 366.35714285714283, 363.5416666666667,422.9807692307692, 486.1041666666667, 426.25, 446.8181818181818, 485.84090909090907, 509.0, 471.3888888888889,355.0416666666667, 363.4375, 356.25, 328.8333333333333, 336.2, 353.5833333333333, 377.0833333333333,349.65,420.9375, 478.6, 431.2083333333333, 423.4166666666667, 451.2083333333333, 466.5833333333333, 475.6666666666667,398.1388888888889, 423.5625, 425.5357142857143, 467.9642857142857, 499.75, 492.59375, 479.9166666666667, 474.2083333333333,909.8, 800.6666666666666, 995.8928571428571, 1294.8, 970.25, 1069.6666666666667,358.4375, 368.55, 362.3125, 359.85, 379.4166666666667, 425.5, 395.8125, 382.1875]

x_q75_mean=[423.0792424242424, 455.1020833333333, 451.07840909090913, 421.5210998877665, 413.62337662337666, 422.78333333333336, 431.412987012987, 442.09848484848493,552.6120046620047, 717.4536616161616, 537.8863636363637, 580.9876033057852, 773.3842975206611, 841.5396694214876, 564.548484848485,420.28611111111104, 417.0113636363636, 479.09818181818184, 381.88181818181823, 389.17454545454547, 444.3151515151515, 452.0814814814815, 395.1127272727272,502.0920454545454, 841.5763636363636, 545.5952861952863, 620.1666666666666, 669.8863636363636, 715.2878787878789, 820.8848484848486,482.2223905723906, 515.3882575757576, 576.1714285714286, 693.9844155844155, 742.4493265993266, 645.6160984848484, 782.9136363636363, 768.4628787878788,1626.287272727273, 1534.3296296296296, 2000.863203463203, 1969.7088888888889, 3354.25, 4313.708333333333,522.85, 504.6238383838384, 463.7890151515152, 466.349898989899, 536.9575757575758, 599.9931818181817, 702.05, 460.875]

x_q90_lim=[412.5400000000001, 428.68750000000006, 420.51249999999993, 405.8666666666667, 384.54285714285714, 421.81666666666666, 416.78571428571433, 420.36666666666673,494.70000000000005, 631.5750000000002, 471.26999999999987, 541.2727272727274, 627.6090909090913, 689.690909090909, 542.688888888889,395.16666666666674, 389.35, 439.2400000000001, 355.93333333333334, 373.40000000000003, 386.0666666666668, 436.4666666666667, 381.96000000000004,465.425, 611.86, 488.23333333333335, 570.4666666666668, 579.6, 596.5,733.7666666666664,449.5666666666666, 492.3, 506.2571428571428, 642.5857142857143, 637.1, 569.8125000000001, 692.35, 531.2333333333333,1254.52, 1329.2777777777783, 1763.0285714285712, 1808.8600000000001, 2039.8000000000006, 3403.3666666666672,533.475, 459.0000000000001, 402.975, 414.34000000000003, 575.4666666666667, 510.625, 619.7750000000002, 436.975]


x_q90_mean=[472.30499999999995, 543.3625, 543.5250000000001, 471.3888888888889, 478.0071428571428, 474.7, 494.70714285714286, 525.1583333333333,703.3333333333334, 974.5041666666666, 673.4849999999999, 716.7045454545454, 1132.639393939394, 1217.259090909091, 653.1333333333333,483.7666666666667, 474.4125, 611.12, 440.43333333333334, 446.32, 534.9, 528.4166666666666, 436.92333333333335,590.0142857142857, 1323.65, 676.2416666666667, 822.2833333333333, 916.8833333333333, 1018.6666666666666,1238.9166666666667,569.8111111111111, 613.18125, 737.2357142857143, 914.6071428571429, 989.0500000000001, 816.9416666666666, 1090.4833333333333, 1091.286111111111,2366.8300000000004, 2315.6388888888887, 3014.785714285714, 2610.7, 5270.75, 6984.0,670.0, 654.53, 589.2125, 586.8, 704.5833333333334, 817.0625, 1031.2375, 538.5625]

x_q95_lim=[444.59499999999997, 477.79374999999993, 465.98749999999995, 443.83333333333337, 436.6142857142856, 456.5, 459.93571428571425, 475.8499999999999,632.0115384615383, 850.5749999999999, 524.4050000000004, 635.5909090909089, 964.3818181818183, 1057.7772727272727, 593.1277777777777,441.04999999999995, 425.63749999999993, 550.6399999999998, 388.74999999999994, 406.9999999999999, 426.4333333333334, 498.01666666666665, 415.18999999999994,521.1875000000001, 1122.31, 544.9083333333332, 704.4166666666666, 820.2416666666662, 679.7833333333332, 975.2333333333328,480.19444444444434, 550.4562500000001, 618.6642857142855, 739.1714285714287, 874.7333333333328, 739.3249999999999, 920.4749999999999, 586.5833333333334,1683.7900000000002, 1838.0888888888876, 2473.314285714285, 2501.5399999999995, 4839.2999999999965, 6175.76666666666,617.1125, 613.1699999999998, 492.33749999999975, 529.6699999999998, 623.2166666666666, 622.8249999999997, 803.5875, 513.35]

x_q95_mean=[504.9, 633.75, 640.4166666666667, 509.98148148148147, 546.0, 502.7777777777778, 544.2142857142857, 594.1944444444445,834.9871794871796, 1193.5416666666667, 849.9833333333333, 841.8181818181819, 1410.090909090909, 1504.469696969697, 728.2407407407409,534.6944444444445, 526.6666666666667, 702.5666666666667, 497.9166666666667, 494.9666666666667, 676.1666666666666, 583.1666666666666,470.8666666666666,691.8333333333334, 1788.9666666666667, 835.75, 962.0, 1108.2777777777778, 1402.388888888889,1580.777777777778,660.2592592592594, 701.0, 891.3095238095239, 1114.357142857143, 1239.611111111111, 979.375, 1347.388888888889, 1467.4166666666667,3343.8,3051.222222222222, 3920.8809523809527, 3052.6, 8249.0, 9927.833333333334,753.5, 778.9333333333333, 705.0, 704.6, 807.8333333333334, 1064.0, 1312.4375, 597.625]


X=pd.DataFrame(data=x_positive_mean)

# Mid-sleep point MS
y=[3.75,	4.5,	3.375,	3.125,	5,	6.625,	4.75,	1.125,	3,	3.875,	4,		3.25,	3.25,	3.75,	3.25,	4.5,	6.5,	6.125,	4.875,	7.5,	8.125,	8.375,		5.625,	3.75,	7.25,	3.75,	2.75,	4,	6.375,		4,
3.75,	4.75,	3.625,	3.5,	6,	6.25,	5,	2.5,3.75,			4,	3.875,	4.125,	4.75,	3.125,	3.875,	4.625,	3.125,	3.5,	3.375,	4.125,	3.5,	3.375]


X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.1, random_state=1)

# Create regression object

regr = linear_model.LinearRegression()
#regr = SVR(kernel='rbf', C=1e3, gamma=0.1)

# Train the model using the training sets
regr.fit(X_train, y_train)

# The coefficients for linear model
#print('Coefficients: \n', regr.coef_)

# The root mean squared error
print("Root mean squared error: %.2f"
      % np.sqrt((regr.predict(X_test)-0.7- y_test) ** 2).mean())
